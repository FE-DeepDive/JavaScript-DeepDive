스터디에서 얘기가 나왔던 질문들과 개인적으로 궁금했던 것들을 정리해보았습니다.

### 🙋🏻‍♀️ const는 상수일까? 변수일까?

> 상수는 재할당이 금지된 변수를 말합니다.

상수도 저장하기 위한 메모리 공간이 필요하므로 변수라고 할 수 있습니다.

단, 변수는 언제든지 재할당을 통해서 값을 변경할 수 있지만, 상수는 재할당이 금지됩니다.

따라서 const는 변수이긴 하지만, **재할당이 금지된 변수**라고 정리할 수 있겠네요.

어떻게 보면 변수를 어느 관점에서 바라보느냐의 차이 일 수도 있겠네요.

변수를 저장하기 위한 메모리 공간을 확보한다는 관점에서는 const도 변수에 해당하지만, 변수를 재할당 유무의 관점에서 바라본다면 const는 상수랍니다.

cf) 해당 내용은 모던 자바스크립트 Deep Dive 페이지 216쪽 15.3.3 상수에 나와 있습니다.

### 🙋🏻‍♀️ const 키워드로 선언한 변수에서 왜 객체의 경우에는 값을 변경할 수 있는가?

> const 키워드로 선언한 변수는 원시값을 할당한 경우 변수 값을 변경할 수 없다.

아래 코드를 살펴봅시다.

```js
const person = { name: "Jung Hee", height: 173 };

person.name = "John";

console.log(person);
```

person의 변수를 참조하면 name 프로퍼티는 'John'으로 바뀌어 있습니다.

우리는 const에 분명 재할당을 할 수 없다고 배웠는데, 왜 값이 바뀌어있을까요?

결론만 말씀드리면 const는 변수에 원시 값을 할당한 경우에만 변수 값을 변경할 수 없습니다.

왜 그러면 객체의 경우에는 변수 값을 변경할 수 있는 걸까요?

아래는 페이스북에 올라온 한 글이라고 합니다.

```
ES6 const does not indicate that a value is ‘constant’ or immutable.
A const value can definitely change.
```

이 글의 핵심은 const는 변수의 재할당이 안되는 것이지, 값의 불변을 의미하는 것은 아니라는 뜻이죠.

왜냐하면 변수안에는 값이 아니라 값을 가리키는 메모리 주소가 담겨있기 때문입니다.

여기서 const를 사용하면 메모리 주소 값은 불변이고 상수이지만, 값은 변하지 않는다고 볼 수 없죠.

만약에 객체 내부의 값들까지 불변으로 만들고 싶다면 페이스북에서 만든 라이브러리 Immutable을 사용하는 것이 낫다고합니다.

### 🙋🏻‍♀️ const는 언제 사용할까?

> const는 가독성과 유지보수의 편의성을 위해서 적극적으로 사용해야 합니다.

두 가지 예시를 들어볼게요!

어떤 것이 더 가독성이 높고 유지보수가 용이한 코드일까요?

```js
let preTaxPrice = 100;

let afterPreTaxPrice = preTaxPrice + preTaxPrice * 0.1; //0.1의 의미를 알 수 없습니다.

console.log(afterPreTaxPrice); //110
```

```js
const TAX_RATE = 0.1; //세율을 의미하는 0.1은 변경할 수 없는 상수로 사용됩니다.

let preTaxPrice = 100;

let afterPreTaxPrice = preTaxPrice + preTaxPrice * TAX_RATE;

console.log(afterPreTaxPrice); //110
```

당연히 후자일 것입니다. 또한 후자가 세율이 변경되면 상수만 변경하면 되기 때문에 유지 보수성도 더욱 향상된답니다.

또 다른 예시로는 16진수 컬러 코드를 상수로 표현한 예시입니다.

```js
const COLOR_RED = "#F00";
const COLOR_GREEN = "#0F0";
const COLOR_BLUE = "#00F";
const COLOR_ORANGE = "#FF7F00";

// 색상을 고르고 싶을 때 별칭을 사용할 수 있게 되었습니다.
let color = COLOR_ORANGE;
alert(color); // #FF7F00
```

예를 들어 COLOR_ORANGE로 쓰게 되면 "#FF7F00"을 쓸 때보다 기억하기도 쉽고 오타를 낼 확률도 적겠죠.

### 🙋🏻‍♀️ 변수 선언과 선언 단계는 다른 것일까?

> 변수 선언은 2가지 단계를 거쳐서 수행이되는데 그것은 선언 단계와 초기화 단계입니다.

다시 말하자면, 자바스크립트 엔진은 변수 선언을 2단계에 거쳐서 수행하게 됩니다.

- 선언 단계: 자바스크립트 엔진에 변수 존재 알리기
- 초기화 단계: 값을 저장하고 메모리 공간을 확보한 다음 undefined를 암묵적으로 할당

따라서 변수 선언의 단계 중 하나에 선언 단계가 포함되어있다고 얘기할 수 있겠네요.

### 🙋🏻‍♀️ 변수에서 초기화 단계를 진행할 때 왜 하필 undefined가 할당되는가?

> undefined는 변수가 선언 이후 값이 개발자에 의해 할당된적이 없다는 것을 나타내기 위한 데이터 타입입니다.

undefined는 개발자가 의도적으로 할당하기 위한 값이 아니라, 자바스크립트 엔진이 변수를 초기화할 때 사용하는 값입니다.

만약 변수를 참조했을 때 undefined를 반환한다면 참조한 변수가 선언 이후 할당 된적이 없는 변수라는 것을 알 수 있게죠.

참고로 변수에 값이 없다는 것을 나타내려면 null을 할당해야 합니다.

cf) 해당 내용은 모던 자바스크립트 Deep Dive 페이지 66쪽 6.5 undefined 타입에 나와 있습니다.

### 🙋🏻‍♀️ 가비지 콜렉터는 어떤 방식으로 작동되는가?

> mark-and-sweep이라는 가비지 콜렉션 기본 알고리즘을 사용하고 있습니다.

하단의 링크를 참고하시면 감사하겠습니다.

[참고자료](https://ko.javascript.info/garbage-collection)
